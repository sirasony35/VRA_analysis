[변량시비 처방맵 가공]
1. vra_data에 있는 변량시비 파일 불러오기
 - 해당 폴더에 있는 파일은 변량시비 Rx 파일로 "필지코드명_VRA_Rx.tif"로 구성
 - ex) HSR5_VRA_Rx.tif
2. 불러온 변량시비 파일을 레스터에서 벡터로 변환하기
 - 생성할 필드의 이름은 "DN"으로 고정
3. 벡터 변환 후 속성테이블의 "DN" 컬럼의 값이 0인 필드 삭제
4. 벡터로 변환된 변량시비 Rx 파일의 심볼 변경
  - 값: DN
  - 그레이디언트 색상표(분류 단계 5단계)
     1) DN이 가장 높은값: 빨강색
     2) DN이 2번째로 높은 값: 주황색
     3) DN이 3번째로 높은 값: 베이지색
     4) DN이 4번째로 높은 값: 초록색
     5) DN이 5번재로 높은 값: 파란색(DN이 가장 낮은값)
5. 라벨 표시
  - 속성 테이블의 DN 값으로 라벨 표시
  - 숫자 정수로 표시
6. 이미지로 저장하기
  - "필지코드명_VRA.png" 형식으로 이미지 저장

[변량시비 전 TIF 레스터 파일 구역 통계하기]
1. before_data 폴더에서 vra_data의 "필지코드명_xxxxxx_tif" 파일에서 조금 전 처리한
  동일 필지코드의 TIF 파일 불러오기(변량시비 전 레스터 데이터 파일)
2. 구역 통계하기
  - 입력 레이어: 벡터 변환 한 변량시비 레이어
  - 레스터 레이어: before_data폴더에서 동일한 필지코드의 파일을 불러온 tif 파일
  - 산출열 접두어 : "before_" 로 설정
  - 계산할 통계: Mean, 중앙값, 최소값, 최대값, 표준편차
3. 생성된 구역통계 산출물의 이름을 "필지코드명_vra_before"로 변경
4. 심볼 설정
    - 값: DN
  - 그레이디언트 색상표(분류 단계 5단계)
     1) DN이 가장 높은값: 빨강색
     2) DN이 2번째로 높은 값: 주황색
     3) DN이 3번째로 높은 값: 베이지색
     4) DN이 4번째로 높은 값: 초록색
     5) DN이 5번재로 높은 값: 파란색(DN이 가장 낮은값)
5. 라벨 표시
  - 속성 테이블의 before_mean 값으로 라벨 표시
  - 숫자 소수점 3자리 까지 표시
6. 이미지로 저장하기
  - "필지코드명_VRA_before.png" 형식으로 저장

[변량시비 후 TIF 레스터 파일 구역 통계 하기]
1. after_data 폴더에서 vra_data의 "필지코드명_xxxxxx.tif" 파일에서 조금 전 전처리한 동일 필지 코드의 TIF 파일 불러오기(변량시비 후 레스터 데이터 파일)
2. 구역 통계하기
 - 입력 레이어: "필지코드명_vra_before" (변량시비 전 데이터로 구역통계한 산출물)
 - 레스터 레이어: 조금 전 after_data폴더에서 불러온 필지코드 동일한 TIF 파일
 - 산출열 접두어: :after_:로 설정
 - 계산할 통계: Mean, 중앙값, 최소값, 최대값, 표준 편차
3. 생성된 구역 통계 산출물의 이름을 "필지코드명_vra_after"로 변경
4. 심볼 설정
  - 값: after_mean
  - Color ramp : Spectral
  - Classes : 5
  - Mode: Equal interval

5. 라벨 설정
  - 단일 라벨
  - 값: after_mean
  - 숫자 표시 형식: 소수점 이하 자릿 수 3
6. 이미지로 저장하기
  - "필지코드명_VRA_after.png" 형식으로 저장(축척: 1:150 정도)

[데이터 생성]
1. 기본 통계 데이터 생성
- "필지코드명_vra_after" 레이어의 속성테이블에서, before_mean 표준편차와 after_mean 표준 편차 계산
- 컬럼: 필지코드: 해당 필지의 코드(필지코드명)
- before_mean_cv: before_mean의 표준편차
- after_mean_cv: after_mean의 표준편차
- CSV 파일로 저장 : 변량시비 전후 표준편차.csv
2. 영역별  데이터 생성
 -  "필지코드명_vra_after"의 속성테이블 선택
 -   1) DN이 가장 높은값: 빨강색
     2) DN이 2번째로 높은 값: 주황색
     3) DN이 3번째로 높은 값: 베이지색
     4) DN이 4번째로 높은 값: 초록색
     5) DN이 5번재로 높은 값: 파란색(DN이 가장 낮은값)
 - DN 값 기준으로 빨강색~파란색 그룹 생성(컬럼명: color_group)
 - 그룹별로 after_mean의 평균, before_mean의 평균값 계산 후
    각각 after_mean_result, before_mean_result 컬럼 생성 후 데이터 입력
 
 - 그룹별로 before_mean_result 대비 after_mean_result의 평균값 증감율 계산
    (after_mean_result - before_mean_result) / before_mean_result * 100 
   후 vi_rate 컬럼 생성 후 데이터 입력
 - CSV 파일로 저장: 변량시비 전후 생육 변화량 확인.csv
 - 필요 컬럼: 필지코드, color_group, before_mean_result, after_mean_result, vi_rate

[반복 작용 및 최종 요구사항]
 이 과정을 필지코드 이미지 별로 자동화 필요하며 데이터는 모든 필지가 완료된 후 최종적으로 csv 파일 뽑아내는 형식,
각 이미지 별로  EPSG:5179, EPSG:32652, EPSG:4326으로 다양하며, QGIS에서 바로 할 경우 코드 변환이 필요 없지만, 코드로 자동화가 필요하면 EPSG:4326으로 변경하는 방안도 고려해야 합니다.
CSV 데이터 생성이 after_data 구역 통계 이후에 진행되며, 그 다음 after_data  구역 통계된 산출물의 심볼과 이미지 저장 진행

 







